{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "$id": "https://naftiko.io/schemas/v0.4/capability.json",
  "name": "Naftiko Capability Specification",
  "description": "This Schema should be used to describe and validate Naftiko Capabilities",
  "type": "object",
  "properties": {
    "naftiko": {
      "type": "string",
      "description": "Version of the Naftiko schema",
      "const": "0.4"
    },
    "info": {
      "$ref": "#/$defs/Info"
    },
    "capability": {
      "$ref": "#/$defs/Capability"
    }
  },
  "required": [
    "naftiko",
    "info",
    "capability"
  ],
  "additionalProperties": false,
  "$defs": {
    "IdentifierKebab": {
      "type": "string",
      "description": "Kebab-case identifier (alphanumeric and hyphens).",
      "pattern": "^[a-zA-Z0-9-]+$"
    },
    "IdentifierExtended": {
      "type": "string",
      "description": "Extended identifier (alphanumeric, hyphens, underscores, and wildcard).",
      "pattern": "^[a-zA-Z0-9-_*]+$"
    },
    "ConsumedInputParameter": {
      "type": "object",
      "description": "Describes a single function parameter. A unique parameter is defined by a combination of a name and location.",
      "properties": {
        "name": {
          "$ref": "#/$defs/IdentifierExtended",
          "description": "Name of the parameter"
        },
        "in": {
          "type": "string",
          "description": "Location of the parameter",
          "enum": [
            "query",
            "header",
            "path",
            "cookie",
            "body"
          ]
        },
        "value": {
          "type": "string",
          "description": "Value of the parameter. Can be a static value or an expression resolved from the execution context (e.g. $this.namespace.param)"
        }
      },
      "required": [
        "name",
        "in"
      ],
      "additionalProperties": false
    },
    "ExposedInputParameter": {
      "type": "object",
      "description": "Declares an input parameter for an exposed resource or operation. Type and description are mandatory since the framework cannot infer them.",
      "properties": {
        "name": {
          "$ref": "#/$defs/IdentifierExtended",
          "description": "Name of the parameter."
        },
        "in": {
          "type": "string",
          "description": "Location of the parameter.",
          "enum": [
            "query",
            "header",
            "path",
            "cookie",
            "body"
          ]
        },
        "type": {
          "type": "string",
          "description": "The expected data type of the parameter.",
          "enum": [
            "string",
            "number",
            "integer",
            "boolean",
            "array",
            "object"
          ]
        },
        "description": {
          "type": "string",
          "description": "A meaningful description of the parameter. Used for agent discovery and human documentation."
        },
        "pattern": {
          "type": "string",
          "description": "Optional regex pattern for validation. Only applicable when type is 'string'."
        },
        "value": {
          "type": "string",
          "description": "Static value or expression resolved from the execution context."
        }
      },
      "required": [
        "name",
        "in",
        "type",
        "description"
      ],
      "additionalProperties": false
    },
    "ConsumedOutputParameter": {
      "type": "object",
      "description": "Output parameter of a consumed operation. Extracts a named value from the raw API response via JsonPath, for use in orchestration steps.",
      "properties": {
        "name": {
          "$ref": "#/$defs/IdentifierExtended",
          "description": "Name of the output parameter. It will be used as a reference in the mapping definitions of the steps to indicate where to map values to."
        },
        "type": {
          "type": "string",
          "enum": [
            "string",
            "number",
            "boolean",
            "object",
            "array"
          ]
        },
        "value": {
          "type": "string",
          "description": "JsonPath expression against the raw response payload. E.g. $.results[*].id"
        }
      },
      "required": [
        "name",
        "type",
        "value"
      ],
      "unevaluatedProperties": false
    },
    "MappedOutputParameterBase": {
      "type": "object",
      "description": "Base for an inline-mapped output parameter with recursive typing and JsonPath extraction.",
      "properties": {
        "type": {
          "type": "string",
          "enum": [
            "string",
            "number",
            "boolean",
            "object",
            "array"
          ]
        },
        "mapping": {
          "type": "string",
          "description": "JsonPath expression to extract the value. E.g. $.properties.Name.title[0].text.content"
        }
      },
      "required": [
        "type"
      ]
    },
    "MappedOutputParameterString": {
      "allOf": [
        {
          "$ref": "#/$defs/MappedOutputParameterBase"
        },
        {
          "properties": {
            "type": {
              "const": "string"
            },
            "mapping": true
          },
          "required": [
            "mapping"
          ],
          "unevaluatedProperties": false
        }
      ]
    },
    "MappedOutputParameterNumber": {
      "allOf": [
        {
          "$ref": "#/$defs/MappedOutputParameterBase"
        },
        {
          "properties": {
            "type": {
              "const": "number"
            },
            "mapping": true
          },
          "required": [
            "mapping"
          ],
          "unevaluatedProperties": false
        }
      ]
    },
    "MappedOutputParameterBoolean": {
      "allOf": [
        {
          "$ref": "#/$defs/MappedOutputParameterBase"
        },
        {
          "properties": {
            "type": {
              "const": "boolean"
            },
            "mapping": true
          },
          "required": [
            "mapping"
          ],
          "unevaluatedProperties": false
        }
      ]
    },
    "MappedOutputParameterObject": {
      "allOf": [
        {
          "$ref": "#/$defs/MappedOutputParameterBase"
        },
        {
          "properties": {
            "type": {
              "const": "object"
            },
            "mapping": true,
            "properties": {
              "type": "object",
              "description": "A map of named properties. Each key is a property name, each value is a typed output parameter.",
              "additionalProperties": {
                "$ref": "#/$defs/MappedOutputParameter"
              }
            }
          },
          "required": [
            "properties"
          ],
          "unevaluatedProperties": false
        }
      ]
    },
    "MappedOutputParameterArray": {
      "allOf": [
        {
          "$ref": "#/$defs/MappedOutputParameterBase"
        },
        {
          "properties": {
            "type": {
              "const": "array"
            },
            "mapping": true,
            "items": {
              "$ref": "#/$defs/MappedItemArray"
            }
          },
          "required": [
            "items"
          ],
          "unevaluatedProperties": false
        }
      ]
    },
    "MappedItemArray": {
      "type": "array",
      "description": "Describes the shape of items inside an array output parameter.",
      "items": {
        "$ref": "#/$defs/MappedOutputParameter"
      },
      "minItems": 1
    },
    "MappedOutputParameter": {
      "description": "Inline-mapped output parameter (simple mode). Used when the exposed operation has a single call + with.",
      "oneOf": [
        {
          "$ref": "#/$defs/MappedOutputParameterString"
        },
        {
          "$ref": "#/$defs/MappedOutputParameterNumber"
        },
        {
          "$ref": "#/$defs/MappedOutputParameterBoolean"
        },
        {
          "$ref": "#/$defs/MappedOutputParameterObject"
        },
        {
          "$ref": "#/$defs/MappedOutputParameterArray"
        }
      ]
    },
    "OrchestratedOutputParameterBase": {
      "type": "object",
      "description": "Base for a named output parameter whose value is populated by step mappings during orchestration.",
      "properties": {
        "name": {
          "$ref": "#/$defs/IdentifierExtended",
          "description": "Name of the output parameter. It will be used as a reference in the mapping definitions of the steps to indicate where to map values to."
        },
        "type": {
          "type": "string",
          "enum": [
            "string",
            "number",
            "boolean",
            "object",
            "array"
          ]
        }
      },
      "required": [
        "name",
        "type"
      ]
    },
    "OrchestratedOutputParameterScalar": {
      "allOf": [
        {
          "$ref": "#/$defs/OrchestratedOutputParameterBase"
        },
        {
          "properties": {
            "type": {
              "enum": [
                "string",
                "number",
                "boolean"
              ]
            },
            "name": true
          },
          "unevaluatedProperties": false
        }
      ]
    },
    "OrchestratedOutputParameterArray": {
      "allOf": [
        {
          "$ref": "#/$defs/OrchestratedOutputParameterBase"
        },
        {
          "properties": {
            "type": {
              "const": "array"
            },
            "name": true,
            "items": {
              "type": "array",
              "items": {
                "$ref": "#/$defs/OrchestratedOutputParameter"
              },
              "minItems": 1
            }
          },
          "required": [
            "items"
          ],
          "unevaluatedProperties": false
        }
      ]
    },
    "OrchestratedOutputParameterObject": {
      "allOf": [
        {
          "$ref": "#/$defs/OrchestratedOutputParameterBase"
        },
        {
          "properties": {
            "type": {
              "const": "object"
            },
            "name": true,
            "properties": {
              "type": "object",
              "additionalProperties": {
                "$ref": "#/$defs/OrchestratedOutputParameter"
              }
            }
          },
          "required": [
            "properties"
          ],
          "unevaluatedProperties": false
        }
      ]
    },
    "OrchestratedOutputParameter": {
      "description": "Named output parameter (orchestrated mode). Used when the exposed operation has steps with mappings/lookups.",
      "oneOf": [
        {
          "$ref": "#/$defs/OrchestratedOutputParameterScalar"
        },
        {
          "$ref": "#/$defs/OrchestratedOutputParameterArray"
        },
        {
          "$ref": "#/$defs/OrchestratedOutputParameterObject"
        }
      ]
    },
    "Hostname": {
      "type": "string",
      "description": "Valid hostname",
      "pattern": "^([a-zA-Z0-9]([a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)(\\.[a-zA-Z0-9]([a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$"
    },
    "IPv4": {
      "type": "string",
      "description": "Valid IPv4 address",
      "pattern": "^((25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.){3}(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$"
    },
    "IPv6": {
      "type": "string",
      "description": "Valid IPv6 address (simplified)",
      "pattern": "^([0-9a-fA-F]{0,4}:){2,7}[0-9a-fA-F]{0,4}$"
    },
    "Address": {
      "description": "hostname or IP for the exposition",
      "anyOf": [
        {
          "$ref": "#/$defs/Hostname"
        },
        {
          "$ref": "#/$defs/IPv4"
        },
        {
          "$ref": "#/$defs/IPv6"
        }
      ]
    },
    "Info": {
      "type": "object",
      "description": "Information about the capability",
      "properties": {
        "label": {
          "type": "string",
          "description": "The display name of the capability"
        },
        "description": {
          "type": "string",
          "description": "A description of the capability (the more meaningful, the easier for agents discovery)"
        },
        "tags": {
          "type": "array",
          "description": "List of tags to help categorize the capability. It can be used for discovery and filtering purposes.",
          "items": {
            "type": "string"
          }
        },
        "created": {
          "type": "string",
          "pattern": "^\\d{4}-(0[1-9]|1[0-2])-(0[1-9]|[12]\\d|3[01])$",
          "description": "The date when the capability was created"
        },
        "modified": {
          "type": "string",
          "pattern": "^\\d{4}-(0[1-9]|1[0-2])-(0[1-9]|[12]\\d|3[01])$",
          "description": "The date when the capability was last modified"
        },
        "stakeholders": {
          "type": "array",
          "description": "List of stakeholders related to this capability. It can be used for discovery and filtering purposes.",
          "items": {
            "$ref": "#/$defs/Person"
          }
        }
      },
      "required": [
        "label",
        "description"
      ],
      "additionalProperties": false
    },
    "Person": {
      "type": "object",
      "description": "A person related to the capability",
      "properties": {
        "role": {
          "type": "string",
          "description": "The role of the person in relation to the capability. E.g. owner, editor, viewer"
        },
        "fullName": {
          "type": "string",
          "description": "The full name of the person"
        },
        "email": {
          "type": "string",
          "pattern": "^[a-zA-Z0-9._%+\\-]+@[a-zA-Z0-9.\\-]+\\.[a-zA-Z]{2,}$",
          "description": "The email address of the person"
        }
      },
      "required": [
        "role",
        "fullName"
      ],
      "additionalProperties": false
    },
    "Capability": {
      "type": "object",
      "description": "Capability technical configuration",
      "properties": {
        "exposes": {
          "type": "array",
          "description": "List of exposed server adapters",
          "items": {
            "$ref": "#/$defs/ExposesApi"
          },
          "minItems": 1
        },
        "consumes": {
          "type": "array",
          "description": "Consumed client adapters",
          "items": {
            "$ref": "#/$defs/ConsumesHttp"
          },
          "minItems": 1
        }
      },
      "required": [
        "exposes",
        "consumes"
      ],
      "additionalProperties": false
    },
    "ExposesApi": {
      "type": "object",
      "description": "API exposition configuration",
      "properties": {
        "type": {
          "type": "string",
          "const": "api"
        },
        "address": {
          "$ref": "#/$defs/Address"
        },
        "port": {
          "type": "integer",
          "minimum": 1,
          "maximum": 65535
        },
        "namespace": {
          "$ref": "#/$defs/IdentifierKebab",
          "description": "Unique identifier for this exposed API"
        },
        "authentication": {
          "$ref": "#/$defs/Authentication"
        },
        "resources": {
          "type": "array",
          "description": "List of exposed resources",
          "items": {
            "$ref": "#/$defs/ExposedResource"
          },
          "minItems": 1
        }
      },
      "required": [
        "type",
        "port",
        "namespace",
        "resources"
      ],
      "additionalProperties": false
    },
    "ExposedResource": {
      "type": "object",
      "description": "An exposed resource",
      "properties": {
        "label": {
          "type": "string",
          "description": "Display name for the resource. It will likely be used in UIs."
        },
        "description": {
          "type": "string",
          "description": "Used to provide *meaningful* information about the resource. Remember, in a world of agents, context is king."
        },
        "path": {
          "type": "string",
          "description": "Path of the resource (supports {{param}} placeholders)"
        },
        "name": {
          "$ref": "#/$defs/IdentifierKebab",
          "description": "Technical name for the resource. It will likely be used for reference"
        },
        "inputParameters": {
          "type": "array",
          "items": {
            "$ref": "#/$defs/ExposedInputParameter"
          }
        },
        "operations": {
          "type": "array",
          "description": "Operations available on this resource",
          "items": {
            "$ref": "#/$defs/ExposedOperation"
          }
        },
        "forward": {
          "$ref": "#/$defs/ForwardConfig"
        }
      },
      "required": [
        "description",
        "path"
      ],
      "anyOf": [
        {
          "required": [
            "operations"
          ]
        },
        {
          "required": [
            "forward"
          ]
        }
      ],
      "additionalProperties": false
    },
    "ExposedOperation": {
      "type": "object",
      "description": "An operation exposed on a resource.",
      "properties": {
        "name": {
          "$ref": "#/$defs/IdentifierKebab",
          "description": "Technical name for the operation. Used for reference."
        },
        "label": {
          "type": "string",
          "description": "Display name for the operation. Used in UIs."
        },
        "description": {
          "type": "string",
          "description": "Used to provide *meaningful* information about the operation. Remember, in a world of agents, context is king."
        },
        "method": {
          "type": "string",
          "enum": [
            "GET",
            "POST",
            "PUT",
            "PATCH",
            "DELETE"
          ],
          "default": "GET"
        },
        "inputParameters": {
          "type": "array",
          "items": {
            "$ref": "#/$defs/ExposedInputParameter"
          }
        },
        "call": {
          "type": "string",
          "description": "For simple cases, the reference to the consumed operation. Format: {namespace}.{operationId}. E.g.: notion.get-database or github.get-user",
          "pattern": "^[a-zA-Z0-9-]+\\.[a-zA-Z0-9-]+$"
        },
        "with": {
          "$ref": "#/$defs/WithInjector"
        },
        "outputParameters": {
          "type": "array"
        },
        "steps": {
          "type": "array",
          "items": {
            "$ref": "#/$defs/OperationStep"
          },
          "minItems": 1
        },
        "mappings": {
          "type": "array",
          "description": "Maps step outputs to the operation's output parameters.",
          "items": {
            "$ref": "#/$defs/StepOutputMapping"
          }
        }
      },
      "required": [
        "method"
      ],
      "oneOf": [
        {
          "required": [
            "call"
          ],
          "properties": {
            "outputParameters": {
              "items": {
                "$ref": "#/$defs/MappedOutputParameter"
              }
            }
          }
        },
        {
          "required": [
            "steps",
            "name"
          ],
          "properties": {
            "mappings": true,
            "outputParameters": {
              "items": {
                "$ref": "#/$defs/OrchestratedOutputParameter"
              }
            }
          }
        }
      ],
      "additionalProperties": false
    },
    "WithInjector": {
      "type": "object",
      "description": "A map of key-value pairs that binds input parameters of the called operation to values or expressions resolved from the execution context.",
      "additionalProperties": {
        "oneOf": [
          {
            "type": "string"
          },
          {
            "type": "number"
          }
        ]
      }
    },
    "ConsumesHttp": {
      "type": "object",
      "description": "HTTP API consumption configuration",
      "properties": {
        "namespace": {
          "$ref": "#/$defs/IdentifierKebab",
          "description": "Unique identifier for this consumed API"
        },
        "type": {
          "type": "string",
          "const": "http"
        },
        "description": {
          "type": "string",
          "description": "Used to provide *meaningful* information about the operation. Remember, in a world of agents, context is king."
        },
        "baseUri": {
          "type": "string",
          "description": "Target URI for the consumes API",
          "pattern": "^https?://[^/]+(/[^{]*)?$"
        },
        "inputParameters": {
          "type": "array",
          "items": {
            "$ref": "#/$defs/ConsumedInputParameter"
          }
        },
        "authentication": {
          "$ref": "#/$defs/Authentication"
        },
        "headers": {
          "type": "array",
          "items": {
            "type": "string",
            "pattern": "^[^:]+:\\s*.+$"
          }
        },
        "resources": {
          "type": "array",
          "description": "List of consumed resources",
          "items": {
            "$ref": "#/$defs/ConsumedHttpResource"
          },
          "minItems": 1
        }
      },
      "required": [
        "namespace",
        "description",
        "type",
        "baseUri",
        "resources"
      ],
      "additionalProperties": false
    },
    "ConsumedHttpResource": {
      "type": "object",
      "description": "A consumed HTTP resource",
      "properties": {
        "name": {
          "$ref": "#/$defs/IdentifierKebab",
          "description": "Technical name for the resource. It will likely be used for reference"
        },
        "label": {
          "type": "string"
        },
        "description": {
          "type": "string"
        },
        "path": {
          "type": "string"
        },
        "inputParameters": {
          "type": "array",
          "items": {
            "$ref": "#/$defs/ConsumedInputParameter"
          }
        },
        "operations": {
          "type": "array",
          "description": "Operations on this resource",
          "items": {
            "$ref": "#/$defs/ConsumedHttpOperation"
          },
          "minItems": 1
        }
      },
      "required": [
        "name",
        "path",
        "operations"
      ],
      "additionalProperties": false
    },
    "ConsumedHttpOperation": {
      "type": "object",
      "description": "An operation on a consumed HTTP resource",
      "properties": {
        "name": {
          "$ref": "#/$defs/IdentifierKebab",
          "description": "Technical name for the operation. Used for reference."
        },
        "label": {
          "type": "string"
        },
        "description": {
          "type": "string",
          "description": "Used to provide *meaningful* information about the operation. Remember, in a world of agents, context is king."
        },
        "method": {
          "type": "string",
          "enum": [
            "GET",
            "POST",
            "PUT",
            "PATCH",
            "DELETE"
          ],
          "default": "GET"
        },
        "inputParameters": {
          "type": "array",
          "items": {
            "$ref": "#/$defs/ConsumedInputParameter"
          }
        },
        "outputRawFormat": {
          "type": "string",
          "enum": [
            "json",
            "xml",
            "avro",
            "protobuf",
            "csv",
            "yaml"
          ],
          "default": "json",
          "description": "The raw format of the response from the consumed API. It is used to determine how to parse the response and extract the output parameters. Default value is json."
        },
        "outputParameters": {
          "type": "array",
          "items": {
            "$ref": "#/$defs/ConsumedOutputParameter"
          }
        },
        "body": {
          "$ref": "#/$defs/RequestBody"
        }
      },
      "required": [
        "name",
        "method"
      ],
      "additionalProperties": false
    },
    "OperationStepBase": {
      "type": "object",
      "properties": {
        "type": {
          "type": "string",
          "enum": [
            "call",
            "lookup"
          ]
        },
        "name": {
          "$ref": "#/$defs/IdentifierKebab",
          "description": "Technical name for the step. Used as namespace for referencing step outputs in mappings and expressions."
        }
      },
      "required": [
        "type",
        "name"
      ]
    },
    "OperationStepCall": {
      "allOf": [
        {
          "$ref": "#/$defs/OperationStepBase"
        },
        {
          "properties": {
            "type": {
              "const": "call"
            },
            "name": true,
            "call": {
              "type": "string",
              "description": "Reference to the consumed operation. Format: {namespace}.{operationId}.",
              "pattern": "^[a-zA-Z0-9-]+\\.[a-zA-Z0-9-]+$"
            },
            "with": {
              "$ref": "#/$defs/WithInjector"
            }
          },
          "required": [
            "call"
          ],
          "unevaluatedProperties": false
        }
      ]
    },
    "OperationStepLookup": {
      "allOf": [
        {
          "$ref": "#/$defs/OperationStepBase"
        },
        {
          "properties": {
            "type": {
              "const": "lookup"
            },
            "name": true,
            "index": {
              "$ref": "#/$defs/IdentifierKebab",
              "description": "Name of a previous call step whose output serves as the lookup table."
            },
            "match": {
              "$ref": "#/$defs/IdentifierKebab",
              "description": "Name of the key field in the index to match against."
            },
            "lookupValue": {
              "type": "string",
              "description": "JsonPath expression resolving to the value(s) to look up."
            },
            "outputParameters": {
              "type": "array",
              "description": "List of field names to extract from the matched index entries.",
              "items": {
                "type": "string"
              },
              "minItems": 1
            }
          },
          "required": [
            "index",
            "match",
            "lookupValue",
            "outputParameters"
          ],
          "unevaluatedProperties": false
        }
      ]
    },
    "OperationStep": {
      "oneOf": [
        {
          "$ref": "#/$defs/OperationStepCall"
        },
        {
          "$ref": "#/$defs/OperationStepLookup"
        }
      ]
    },
    "StepOutputMapping": {
      "type": "object",
      "description": "Describes how to map the output of an operation step to the input of another step or to the output of the exposed operation",
      "properties": {
        "targetName": {
          "$ref": "#/$defs/IdentifierExtended",
          "description": "The name of the parameter to map to. It can be an input parameter of a next step or an output parameter of the exposed operation"
        },
        "value": {
          "type": "string",
          "description": "A JsonPath reference to the value to map from. E.g. $.get-database.database_id"
        }
      },
      "required": [
        "targetName",
        "value"
      ],
      "additionalProperties": false
    },
    "RequestBodyJson": {
      "type": "object",
      "properties": {
        "type": {
          "type": "string",
          "const": "json"
        },
        "data": {
          "oneOf": [
            {
              "type": "string"
            },
            {
              "type": "object"
            },
            {
              "type": "array"
            }
          ]
        }
      },
      "required": [
        "type",
        "data"
      ],
      "additionalProperties": false
    },
    "RequestBodyText": {
      "type": "object",
      "properties": {
        "type": {
          "type": "string",
          "enum": [
            "text",
            "xml",
            "sparql"
          ]
        },
        "data": {
          "type": "string"
        }
      },
      "required": [
        "type",
        "data"
      ],
      "additionalProperties": false
    },
    "RequestBodyFormUrlEncoded": {
      "type": "object",
      "properties": {
        "type": {
          "type": "string",
          "const": "formUrlEncoded"
        },
        "data": {
          "oneOf": [
            {
              "type": "string"
            },
            {
              "type": "object",
              "additionalProperties": {
                "type": "string"
              }
            }
          ]
        }
      },
      "required": [
        "type",
        "data"
      ],
      "additionalProperties": false
    },
    "RequestBodyMultipartFormPart": {
      "type": "object",
      "properties": {
        "name": {
          "type": "string"
        },
        "value": {
          "type": "string"
        },
        "filename": {
          "type": "string"
        },
        "contentType": {
          "type": "string"
        }
      },
      "required": [
        "name",
        "value"
      ],
      "additionalProperties": false
    },
    "RequestBodyMultipartForm": {
      "type": "object",
      "properties": {
        "type": {
          "type": "string",
          "const": "multipartForm"
        },
        "data": {
          "type": "array",
          "items": {
            "$ref": "#/$defs/RequestBodyMultipartFormPart"
          }
        }
      },
      "required": [
        "type",
        "data"
      ],
      "additionalProperties": false
    },
    "RequestBodyRaw": {
      "type": "string",
      "description": "A raw body string. When used with a YAML block scalar (|), the string is sent as-is. Interpreted as JSON by default."
    },
    "RequestBody": {
      "description": "Request body configuration",
      "oneOf": [
        {
          "$ref": "#/$defs/RequestBodyJson"
        },
        {
          "$ref": "#/$defs/RequestBodyText"
        },
        {
          "$ref": "#/$defs/RequestBodyFormUrlEncoded"
        },
        {
          "$ref": "#/$defs/RequestBodyMultipartForm"
        },
        {
          "$ref": "#/$defs/RequestBodyRaw"
        }
      ]
    },
    "ForwardConfig": {
      "type": "object",
      "description": "Configuration for forwarding requests to a consumed namespace",
      "properties": {
        "targetNamespace": {
          "$ref": "#/$defs/IdentifierKebab",
          "description": "The namespace to forward requests to"
        },
        "trustedHeaders": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "description": "List of headers that can be forwarded",
          "minItems": 1
        }
      },
      "required": [
        "targetNamespace",
        "trustedHeaders"
      ],
      "additionalProperties": false
    },
    "Authentication": {
      "description": "Authentication",
      "oneOf": [
        {
          "$ref": "#/$defs/AuthBasic"
        },
        {
          "$ref": "#/$defs/AuthApiKey"
        },
        {
          "$ref": "#/$defs/AuthBearer"
        },
        {
          "$ref": "#/$defs/AuthDigest"
        }
      ]
    },
    "AuthBasic": {
      "type": "object",
      "description": "Basic authentication",
      "properties": {
        "type": {
          "type": "string",
          "const": "basic"
        },
        "username": {
          "type": "string",
          "description": "Username for basic auth"
        },
        "password": {
          "type": "string",
          "description": "Password for basic auth"
        }
      },
      "required": [
        "type"
      ],
      "additionalProperties": false
    },
    "AuthApiKey": {
      "type": "object",
      "description": "API Key authentication",
      "properties": {
        "type": {
          "type": "string",
          "const": "apikey"
        },
        "key": {
          "type": "string",
          "description": "API key name"
        },
        "value": {
          "type": "string",
          "description": "API key value"
        },
        "placement": {
          "type": "string",
          "enum": [
            "header",
            "query"
          ],
          "description": "Where to place the API key"
        }
      },
      "required": [
        "type"
      ],
      "additionalProperties": false
    },
    "AuthBearer": {
      "type": "object",
      "description": "Bearer token authentication",
      "properties": {
        "type": {
          "type": "string",
          "const": "bearer"
        },
        "token": {
          "type": "string",
          "description": "Bearer token"
        }
      },
      "required": [
        "type"
      ],
      "additionalProperties": false
    },
    "AuthDigest": {
      "type": "object",
      "description": "Digest authentication",
      "properties": {
        "type": {
          "type": "string",
          "const": "digest"
        },
        "username": {
          "type": "string",
          "description": "Username for digest auth"
        },
        "password": {
          "type": "string",
          "description": "Password for digest auth"
        }
      },
      "required": [
        "type"
      ],
      "additionalProperties": false
    }
  }
}