---
naftiko: "0.4"
info:
  label: passtru
  description: Example pass tru capability
capability:
  exposes:
  - namespace: "local-api"
    type: api
    address: "localhost"
    port: 8080
    resources: 
      - path: "/users/"
        name: "users"
        label: "Users API"
        description: "API to retrieve user information"
        operations:
          - method: "GET"
            name: "get-users"
            label: "Get Users"
            steps:
              - call: "github.get-users"
                type: call
                name: "fetch-users"
      - path: "/notion"
        label: "Notion API Pass-thru Proxy"
        description: "A proxy to forward requests to the Notion API while the capability is being configured"
        forward:
          targetNamespace: "notion"
          trustedHeaders:
            - "Notion-Version"
  consumes:
  - namespace: "notion"
    description: "Notion API integration for accessing project and time tracking data relevant to CIR reporting."
    type: http
    baseUri: "https://api.notion.com/v1/"
    resources:
      - path: "/mock"
        name: "notion"
        label: "Notion API"
        description: "This is a pass-thru resource to forward requests to the Notion API"
        operations:
          - name: "get-mock"
            label: "Mock operation for example"
            method: GET
            outputRawFormat: JSON
    authentication:
      type: "basic"
      username: "scott"
      password: "tiger"
  - namespace: "github"
    description: "GitHub API integration for accessing user data."
    type: http
    baseUri: "https://api.github.com/v1/"
    resources:
      - name: "github"
        path: "/users"
        label: "GitHub API"
        description: "This is a pass-thru resource to forward requests to the GitHub API"
        operations:
          - name: "get-users"
            label: "Mock operation for example"
            method: GET