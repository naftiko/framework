---
naftiko: "0.4"
info:
  label: "Sample Capability"
  description: "This is a sample capability specification to demonstrate the features of Naftiko"
  tags:
  - Naftiko
  - Sample
  created: "2026-01-01"
  modified: "2026-02-12"
  stakeholders:
  - role: "editor"
    fullName: "John Doe"
    email: "john.doe@example.com" 

capability:
  exposes:
    - type: "api"
      address: "localhost"
      port: 9090
      namespace: "sample"
      resources:
        - path: "/users/{{username}}"
          name: "user"
          label: "User resource"
          description: "This is a resource to retrieve user information"
          operations:
            - method: "GET"
              name: "get-user"
              label: "Get User"
              inputParameters:
                - name: "user_name"
                  in: "path"
                  type: "string"
                  description: "Username to retrieve information for"
              steps:
                - call: "github.get-user"
                  name: "fetch-user"
                  type: "call"
                  with:
                    "username": "$this.sample.{{user_name}}"
                      
                    

        - path: "/databases/{{database_id}}"
          name: "db"
          label: "Database resource"
          description: "This is a resource to retrieve and update information about a database"
          inputParameters:
            - name: "database_id"
              type: "string"
              description: "ID of the database to retrieve information for"
              in: "path"
          operations:
            - method: "GET"
              name: "get-db"
              label: "Get Database"
              outputParameters:
                - name: "Api-Version"
                  type: string
                - name: "db_name"
                  type: "string"
              steps:
                - call: "notion.get-database"
                  type: "call"
                  name: "fetch-db"
                  with:
                    "database_id": "$this.sample.{{database_id}}"
              mappings:
                  - targetName: "db_name"
                    value: "$.{{dbName}}"
                  - targetName: "Api-Version"
                    value: "v1"
        - path: "/notion/{{path}}"
          label: "Notion API Pass-thru Proxy"
          description: "A proxy to forward requests to the Notion API while the capability is being configured"
          forward:
            targetNamespace: "notion"
            trustedHeaders:
              - "Notion-Version"
        - path: "/github/{{path}}"
          label: "GitHub API Pass-thru Proxy"
          description: "A proxy to forward requests to the GitHub API while the capability is being configured"
          forward:
            targetNamespace: "github"
            trustedHeaders:
            - "Notion-Version"

  consumes:
    - type: "http"
      description: "HTTP API integration for accessing external services."
      namespace: "notion"
      baseUri: "https://api.notion.com/v1/"
      inputParameters:
        - name: "Notion-Version"
          in: "header"
          value: "2022-06-28"
      authentication:
        type: "basic"
        username: "scott"
        password: "tiger"
      resources:
        - path: "databases/{{database_id}}"
          name: "db"
          label: "Database resource"
          description: "This is a resource to retrieve and update information about a database"
          inputParameters:
            - name: "database_id"
              in: "path"
              value: "1234"
          operations:
            - method: "GET"
              name: "get-database"
              label: "Get Database"
              outputRawFormat: "xml"
              outputParameters:
                - name: "dbName"
                  type: "string"
                  value: "$.title[0].text.content"
                - name: "dbId"
                  type: "string"
                  value: "$.id"
            - method: "PUT"
              name: "update-database"
              label: "Update Database"
            - method: "DELETE"
              name: "delete-database"
              label: "Delete Database"
        - path: "databases/{{database_id}}/query"
          name: "query-db"
          label: "Query database resource"
          operations:
            - method: "POST"
              name: "query-database"
              label: "Query Database"

    - type: "http"
      description: "HTTP API integration for accessing external services."
      namespace: "github"
      baseUri: "https://api.github.com/v1/"
      resources:
        - path: "/users/{{username}}"
          name: "user"
          label: "User resource"
          operations:
            - method: "GET"
              name: "get-user"
              label: "Get User"
